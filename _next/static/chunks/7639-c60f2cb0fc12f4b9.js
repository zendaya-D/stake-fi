"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7639],{91772:function(e,t,r){var n,i,a,o,s,l,c,u=r(52983);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.Z=function(e){return u.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),n||(n=u.createElement("path",{fill:"#627EEA",fillOpacity:.31,d:"M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12Z"})),i||(i=u.createElement("path",{fill:"#fff",fillOpacity:.602,d:"M12.373 3v6.652l5.623 2.513L12.373 3Z"})),a||(a=u.createElement("path",{fill:"#fff",d:"M12.373 3 6.75 12.165l5.623-2.512V3Z"})),o||(o=u.createElement("path",{fill:"#fff",fillOpacity:.602,d:"M12.373 16.476v4.52L18 13.212l-5.627 3.264Z"})),s||(s=u.createElement("path",{fill:"#fff",d:"M12.373 20.996v-4.52L6.75 13.211l5.623 7.784Z"})),l||(l=u.createElement("path",{fill:"#fff",fillOpacity:.2,d:"m12.373 15.43 5.623-3.265-5.623-2.51v5.775Z"})),c||(c=u.createElement("path",{fill:"#fff",fillOpacity:.602,d:"m6.75 12.165 5.623 3.265V9.654L6.75 12.165Z"})))}},37822:function(e,t,r){r.d(t,{i:function(){return a}});var n=r(75246),i=r(2524);let a=e=>{"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&(0,i.X)({mainText:"Oops",description:e.message},{type:n.Am.TYPE.ERROR,autoClose:3e3})}},71034:function(e,t,r){r.d(t,{t:function(){return n}});function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!e||!+e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r])}},53168:function(e,t,r){r.d(t,{e:function(){return s}});var n=r(37822),i=r(12579);let a=(e,t)=>{let r=JSON.stringify(e),n=new Blob([r],{type:"application/json"});return new File([n],t)};var o=r(71034);let s=async(e,t)=>{try{if(l(e,i._N))throw Error("File size too big, max size: ".concat((0,o.t)(i._N)));let r=await fetch("/api/ipfs/pin",{method:"POST",body:JSON.stringify({content:e,filePath:t}),headers:{"Content-Type":"application/json"}}),a=await r.json();if(a&&a.error&&(0,n.i)(Error(a.error)),a&&a.success)return null==a?void 0:a.cid;(0,n.i)(Error("The request to pin the content failed"))}catch(e){(0,n.i)(e)}},l=(e,t)=>a(e,"file").size>t},12337:function(e,t,r){r.d(t,{F1:function(){return C},GO:function(){return w},I6:function(){return P},Kl:function(){return B},Qo:function(){return A},Uo:function(){return O},XS:function(){return N},Xz:function(){return T},gD:function(){return H},qH:function(){return I}});var n=r(52983),i=r(88471),a=r(75246),o=r(78096),s=r(97748),l=r(78361),c=r(21981),u=r(2524),d=r(12579),f=r(46645),p=r(37822),h=r(43328),g=r(64067),y=r(92170),m=r(89825),E=r(53168),b=r(69869);let P=()=>{let{data:e,isError:t}=(0,g.lty)({functionName:"allocateSourceOfFunds"});if(!t&&e)return b.qK[e]},w=()=>{let e=v();return{isLoading:(null==e?void 0:e.registered)===void 0,isRegistered:null!=e&&!!e.registered,isAssigned:!0}},N=()=>{let{data:e,error:t}=(0,g.lty)({functionName:"maxValidatorsPerOwner"});if(t){console.error(t);return}if(e)return{asNumber:Number(e),asBigInt:e}},v=()=>{let{address:e}=(0,f.H)(),{data:t,error:r}=(0,g.lty)(e&&{functionName:"bnftHoldersIndexes",args:[e]});if(r){console.error(r);return}if(t)return{registered:t[0],index:t[1]}},A=()=>{let{address:e,chainId:t}=(0,f.H)(),{transactionData:r,writeContract:i,isPendingSig:c}=(0,g.crI)(),{data:u}=(0,l.P)({address:y.rY.LiquidityPool});return{deposit:(0,n.useCallback)(async r=>{if(e){if(t!==s.R.id){a.Am.error("Wrong network, please switch to Ethereum Mainnet");return}if(!u){a.Am.error("Possible network mismatch, contact support");return}return i({functionName:"deposit",value:(0,o.f)(r),chainId:s.R.id})}},[e,i,t,u]),depositPending:(0,m.TC)(r,c),depositTxSuccess:r.isSuccess}},C=()=>{let{address:e,chainId:t}=(0,f.H)(),{transactionData:r,writeContract:i,isPendingSig:c,variables:u}=(0,g.crI)(),{data:d}=(0,l.P)({address:y.rY.LiquidityPool});return{deposit:(0,n.useCallback)(async(r,n)=>{if(e){if(t!==s.R.id){a.Am.error("Wrong network, please switch to Ethereum Mainnet");return}if(!d){a.Am.error("Possible network mismatch, contact support");return}return i({functionName:"deposit",args:[n],value:(0,o.f)(r),chainId:s.R.id})}},[e,i,t,d]),depositPending:(0,m.TC)(r,c),depositTxSuccess:r.isSuccess}},T=()=>{let{address:e}=(0,f.H)(),{transactionData:t,writeContract:r,isPendingSig:i}=(0,g.crI)();return{requestWithdraw:(0,n.useCallback)(async t=>{if(e)return r({functionName:"requestWithdraw",args:[e,(0,o.f)(t)]})},[e,r]),requestWithdrawPending:(0,m.TC)(t,i)}},B=()=>{let{address:e,chain:t}=(0,f.H)(),{data:r}=(0,c.p)(),{transactionData:i,writeContract:a,isPendingSig:s}=(0,g.crI)();return{requestWithdrawWithPermit:(0,n.useCallback)(async(n,i)=>{if(!e)return;let s=(0,o.f)(n);try{let n=await (0,h.O)({value:s,nonce:i,account:e,chainId:null==t?void 0:t.id,signer:r,eEthAddress:y.rY.EETH,spender:y.rY.LiquidityPool});if(!n)return;await a({functionName:"requestWithdrawWithPermit",args:[e,s,n]})}catch(e){console.error("User rejected signature request")}},[a,e,null==t?void 0:t.id,r]),requestWithdrawWithPermitPending:(0,m.TC)(i,s)}},H=()=>{let{transactionData:e,writeContract:t,isPendingSig:r}=(0,g.crI)(),{isAssigned:i}=w();return{batchDepositAsBnftHolder:(0,n.useCallback)(async e=>{try{if(!i){(0,u.X)({mainText:"Not Assigned"},{autoClose:3e3,type:"error"});return}await t({functionName:"batchDepositWithLiquidityPoolAsBnftHolder",args:[e,BigInt(e.length)]})}catch(e){(0,p.i)(e)}},[i,t]),batchDepositAsBnftHolderState:e.status,batchDepositAsBnftHolderPending:(0,m.TC)(e,r)}},I=()=>{let{transactionData:e,writeContract:t,isPendingSig:r}=(0,g.crI)(),[o,s]=(0,n.useState)("IDLE"),l=(0,n.useRef)((0,i.x0)());return{batchRegisterAsBnftHolder:(0,n.useCallback)(async e=>{try{let r=[],n=[],i=[],o=[],c=[];e.forEach(e=>{let{depositData:t}=e;i.push(BigInt(e.validatorID)),r.push("0x".concat(t.approveValidator.deposit_data_root)),n.push("0x".concat(t.approveValidator.signature)),o.push({publicKey:"0x".concat(t.pubkey),signature:"0x".concat(t.registerValidator.signature),depositDataRoot:"0x".concat(t.registerValidator.deposit_data_root),ipfsHashForEncryptedValidatorKey:""}),c.push({encryptedKeystoreName:e.encryptedKeystoreName,encryptedValidatorKey:e.encryptedValidatorKey,encryptedPassword:e.encryptedPassword,stakerPublicKey:e.stakerPublicKey,nodeOperatorPublicKey:e.nodeOperatorPublicKey,etherfiDesktopAppVersion:e.etherfiDesktopAppVersion})}),s("LOADING"),a.Am.loading("Uploading Validator keys to IPFS",{isLoading:!0,toastId:l.current});let f=await Promise.all(c.map(e=>(0,E.e)(e,"encryptedValidatorKeys"))),p=f.filter(Boolean);if(p.length!==f.length){(0,u.e)(l.current,{mainText:"Oops",description:"Upload failed"},{isLoading:!1,type:a.Am.TYPE.ERROR,autoClose:3e3}),s("FAIL");return}s("SUCCESS"),(0,u.e)(l.current,{mainText:"Upload Successful"},{isLoading:!1,type:a.Am.TYPE.SUCCESS,autoClose:3e3});let h=o.map((e,t)=>({...e,ipfsHashForEncryptedValidatorKey:p[t]}));return t({functionName:"batchRegisterWithLiquidityPoolAsBnftHolder",args:[d.RU,i,h,r,n]})}catch(e){a.Am.dismiss(l.current),(0,p.i)(e)}},[t]),batchRegisterAsBnftHolderState:e.status,batchRegisterAsBnftHolderPending:(0,m.TC)(e,r),uploadStatus:o}},O=()=>{let{transactionData:e,writeContract:t,isPendingSig:r}=(0,g.crI)();return{batchCancelBnftHolder:(0,n.useCallback)(async e=>e.length?t({functionName:"batchCancelDeposit",args:[e]}):(0,u.X)({mainText:"No validators to cancel"},{autoClose:3e3,type:"error"}),[t]),batchCancelBnftHolderState:e.status,batchCancelBnftHolderPending:(0,m.TC)(e,r)}}},69869:function(e,t,r){r.d(t,{Su:function(){return l},qK:function(){return s}}),r(52983);var n=r(81643);r(14924);var i=r(90264),a=r(46645);r(37822),r(81654),r(64067);var o=r(92170);r(53235);let s=Object.values({UNDEFINED:"UNDEFINED",EETH:"EETH",ETHER_FAN:"ETHER_FAN",DELEGATED_STAKING:"DELEGATED_STAKING"}),l=()=>{let{address:e}=(0,a.H)(),{data:t}=(0,i.u)({address:o.rY.NodeOperatorManager,abi:n.L3,functionName:"isWhitelisted",args:[e]});return t||!1}}}]);